/* --- Identidade Visual Moinhos de Vento --- */
:root{
  --azul-moinhos:#004b84;
  --verde-moinhos:#00a99d;
  --cinza-claro:#f8f9fa;
  --cinza-texto:#495057;
  --cinza-borda:#dee2e6;

  /* tipografia fluida */
  --fs-100: clamp(14px, 1.2vw, 16px);
  --fs-200: clamp(15px, 1.35vw, 17px);
  --fs-300: clamp(16px, 1.6vw, 18px);
  --fs-400: clamp(18px, 2vw, 22px);
  --fs-500: clamp(20px, 2.4vw, 26px);
}

*{box-sizing:border-box}
html,body{height:100%}

body{
  font-family: system-ui, -apple-system, BlinkMacSystemFont,'Segoe UI',Roboto,Ubuntu,'Open Sans','Helvetica Neue',sans-serif;
  background:var(--cinza-claro);
  color:#333;
  margin:0;
  padding-top:100px;
  padding-left: max(16px, env(safe-area-inset-left));
  padding-right:max(16px, env(safe-area-inset-right));
  line-height:1.5;
  font-size:var(--fs-200);
}

header{
  text-align:center;
  margin-bottom:32px;
  color:var(--azul-moinhos);
  padding:16px 0;
}
.logos-container{
  display:flex;justify-content:center;align-items:center;gap:20px;
  margin-bottom:12px;flex-wrap:wrap;
}
#logo-hmv,#logo-casa-colaborador{max-height:90px;width:auto}

#agenda-container{max-width:1200px;margin:0 auto}

.loading,.alerta-erro,.alerta-info,.alerta-admin{
  text-align:center;font-size:var(--fs-300);color:#6c757d;padding:20px;
}

/* --------- Toolbar (data + botões) --------- */
#seletor-container{
  max-width:1200px;margin:0 auto 14px auto;padding:12px 16px;
  background:#fff;border-radius:10px;border:1px solid var(--cinza-borda);
  display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;
  box-shadow:0 4px 8px rgba(0,0,0,.05);
}
#seletor-container label{font-weight:600;color:var(--cinza-texto)}
#seletor-data{
  padding:10px 12px;border:2px solid var(--cinza-borda);border-radius:10px;
  font:inherit;min-width:180px;background:#fff;cursor:pointer;transition:border-color .2s;
}
#seletor-data:focus{outline:none;border-color:var(--azul-moinhos);box-shadow:0 0 0 4px rgba(0,75,132,.18)}

.dia-semana-label{font-weight:700;color:var(--azul-moinhos);text-transform:capitalize}

/* Botões */
.btn-acao,.btn-modal{
  padding:10px 14px;border:none;border-radius:8px;font-weight:700;cursor:pointer;
  transition:opacity .18s,transform .06s; will-change: transform;
}
.btn-acao:active,.btn-modal:active{transform:scale(.98)}
.btn-azul{background:var(--azul-moinhos);color:#fff}
.btn-cinza{background:#6c757d;color:#fff}
.btn-vermelho{background:#dc3545;color:#fff}
.btn-verde{background:var(--verde-moinhos);color:#fff}
.btn-modal:hover,.btn-acao:hover{opacity:.9}

/* Admin login flutuante */
#btn-admin-login{
  position:fixed;top:10px;right:20px;z-index:1000;padding:10px 15px
}

/* --------- Filtro – Menu de Atividades --------- */
.filtros-section{max-width:1200px;margin:0 auto 10px auto;padding:10px 16px;background:#fff;border-radius:10px;border:1px solid var(--cinza-borda);box-shadow:0 4px 8px rgba(0,0,0,.05)}
.menu-atividades{
  display:flex;flex-wrap:wrap;gap:.5rem;
  /* mobile: rolagem horizontal */
  overflow:auto; -webkit-overflow-scrolling:touch; scroll-snap-type:x proximity; padding-bottom:4px;
}
.menu-atividades .chip-atividade{scroll-snap-align:start}
.chip-atividade{
  padding:.45rem .9rem;border:1px solid #d0d7de;border-radius:999px;background:#fff;color:#111;
  cursor:pointer;font-weight:700;white-space:nowrap;
  transition:transform .08s ease, background-color .15s ease, border-color .15s ease;
}
.chip-atividade:hover{transform:translateY(-1px);border-color:var(--azul-moinhos)}
.chip-atividade.ativo{background:var(--azul-moinhos);color:#fff;border-color:var(--azul-moinhos)}
.chip-atividade .badge{
  display:inline-block;font-size:.78em;margin-left:.45rem;padding:.1rem .45rem;border-radius:999px;background:rgba(0,0,0,.08)
}

/* --------- Blocos / Acordeão --------- */
.bloco-atividade{margin-top:18px}

.titulo-atividade{
  position:relative;font-size:var(--fs-500);color:var(--azul-moinhos);
  border-bottom:2px solid var(--verde-moinhos);margin:22px 0 6px 0;background:#fff;
  padding:12px 46px 12px 14px;border-radius:10px;box-shadow:0 2px 5px rgba(0,0,0,.05);
  user-select:none;cursor:pointer;
}
.titulo-atividade::after{
  content:"";position:absolute;right:16px;top:50%;width:10px;height:10px;
  border-right:3px solid var(--azul-moinhos);border-bottom:3px solid var(--azul-moinhos);
  transform:translateY(-60%) rotate(45deg);transition:transform .25s ease;
}
.titulo-atividade.ativo::after{transform:translateY(-30%) rotate(-135deg)}

.atividade-content{
  background:#fff;border-radius:10px;box-shadow:0 4px 8px rgba(0,0,0,.05);
  margin-bottom:16px;overflow:hidden; /* anima o max-height no JS */
}

.subtitulo-profissional{
  margin:10px 0 6px 12px;font-weight:700;color:var(--cinza-texto);opacity:.95;font-size:var(--fs-300)
}

.slots-grid{display:flex;flex-wrap:wrap;gap:10px;padding:6px 12px 14px}

/* Slot (cartão) */
.slot-horario{
  flex-basis: calc(25% - 10px);
  min-width: 160px;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  padding:14px 10px;border-radius:10px;text-align:center;font-weight:700;
  box-shadow:0 2px 4px rgba(0,0,0,.08);
  transition:transform .18s, background-color .2s, border-color .2s;
  border:1px solid transparent;
  touch-action: manipulation;
}
.horario-label{font-size:var(--fs-300);margin-bottom:4px}
.vagas-label{font-weight:600;color:#2e5b2e;font-size:var(--fs-200)}

/* Status */
.status-disponivel{background:#d4edda;color:#155724;cursor:pointer}
.status-disponivel:hover{background:var(--verde-moinhos);color:#fff;transform:scale(1.02)}
.status-lotado{background:#f8d7da;color:#721c24;cursor:not-allowed}
.status-indisponivel{background:#f2f2f2;color:#6c757d;cursor:not-allowed}
.status-fechado{background:#e9ecef;color:#495057;cursor:default}

/* --- Modo Admin --- */
.aviso-admin{
  font-weight:700;color:#dc3545;padding:10px;margin-bottom:12px;border:1px dashed #dc3545;background:#fef7f7;text-align:center
}
.slot-horario .admin-id{font-size:.78em;color:#6c757d;margin-bottom:3px}
.slot-horario .status-admin-reservas{font-weight:400;color:var(--cinza-texto);margin-top:3px;font-size:.9em}
.slot-horario button.status-admin-excluir{
  background:none;border:none;padding:0;margin-top:6px;font-size:.95em;font-weight:800;cursor:pointer;text-decoration:underline;color:#c9302c
}
.slot-horario button.status-admin-excluir:hover{color:#8b0000}

.status-admin-ativo.status-disponivel{
  background:#ffc9c9!important;color:#c9302c!important;border:1px solid #dc3545!important
}
.status-admin-ativo.status-disponivel:hover{background:#dc3545!important;color:#fff!important}
.status-admin-adicionar{
  background:#d4edda!important;color:#155724!important;border:1px solid var(--verde-moinhos)!important;cursor:pointer
}
.status-admin-adicionar:hover{background:var(--verde-moinhos)!important;color:#fff!important;transform:scale(1.02)}

/* --------- Modais --------- */
.modal-overlay{
  position:fixed;inset:0;background:rgba(0,0,0,.6);
  display:flex;justify-content:center;align-items:center;z-index:1000;opacity:0;transition:opacity .3s ease
}
.modal-overlay.hidden{opacity:0;pointer-events:none}
.modal-content{
  background:#fff;padding:24px;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.2);
  width:min(92vw, 520px);max-height:90vh;overflow:auto;text-align:left
}
.large-modal .modal-content{width:min(94vw, 720px)}
.modal-content h2{margin:0 0 12px;color:var(--azul-moinhos)}
.form-group{margin:14px 0}
.form-group label{display:block;margin-bottom:6px;font-weight:700;color:var(--cinza-texto)}
.modal-content input:not([type="checkbox"]), .modal-content select{
  width:100%;padding:10px;font-size:var(--fs-200);border:1px solid var(--cinza-borda);border-radius:8px
}
.modal-botoes{display:flex;justify-content:flex-end;gap:10px;margin-top:18px}
.vertical-botoes{flex-direction:column;gap:10px}
.vertical-botoes button{width:100%}
#modal-mensagem,#consulta-mensagem,#admin-add-mensagem{margin-top:12px;font-weight:700;text-align:center}

/* Consulta – lista */
#lista-agendamentos{
  list-style:none;padding:0;margin:16px 0;max-height:320px;overflow:auto;
  border-top:1px solid var(--cinza-borda);border-bottom:1px solid var(--cinza-borda)
}
.item-reserva{
  display:flex;justify-content:space-between;align-items:center;gap:10px;
  padding:10px;border-bottom:1px solid #f0f0f0
}
.item-reserva:last-child{border-bottom:none}
.item-reserva span{flex:1;font-size:var(--fs-200)}

/* Admin adicionar – grelha de horários */
.horarios-grid{
  display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
  gap:10px;margin-top:10px;padding:14px;border:1px solid var(--cinza-borda);border-radius:8px;max-height:420px;overflow:auto
}
.horario-item{
  display:flex;align-items:center;justify-content:space-between;gap:10px;padding:10px;border:1px solid var(--cinza-borda);
  border-radius:8px;background:#fff;cursor:pointer;transition:background-color .2s,border-color .2s
}
.horario-item:hover{background:#f1f3f5;border-color:var(--verde-moinhos)}
.horario-item label{margin:0;cursor:pointer;flex:1}
.qm-checkbox,.qm-indisp-checkbox{width:22px;height:22px}
.qm-checkbox:checked,.qm-indisp-checkbox:checked{accent-color:var(--verde-moinhos)}

/* Animação personagem */
.personagem-container{position:relative;width:100%;height:100px;overflow:hidden}
.personagens-loop{
  height:100%;width:200vw;background:url('img/personagem-casa.png') repeat-x 0 10px/auto 80px;
  transform:scaleX(-1);animation:rolarFundo 30s linear infinite;
}
@keyframes rolarFundo{from{background-position-x:0}to{background-position-x:-1920px}}

/* Utilidades */
.hidden{display:none!important}

/* QR Code */
.qr-code-container{max-width:1200px;margin:36px auto;text-align:center}
#qr-code-aulas{max-width:900px;width:100%;height:auto;border-radius:10px;box-shadow:0 4px 8px rgba(0,0,0,.1)}

/* --------- Responsividade --------- */
/* Tablets médios */
@media (max-width: 1100px){
  .slot-horario{flex-basis:calc(33.333% - 10px)}
  #logo-hmv,#logo-casa-colaborador{max-height:84px}
}
/* Tablets pequenos / telefones grandes */
@media (max-width: 820px){
  body{padding-top:88px}
  .slot-horario{flex-basis:calc(50% - 10px);min-height:84px}
  .titulo-atividade{font-size:var(--fs-400)}
  #seletor-container{justify-content:space-between}
  #seletor-data{min-width:unset;flex:1}
  .btn-acao{flex:1}
}
/* Mobile */
@media (max-width: 520px){
  #seletor-container{padding:12px;gap:10px}
  #seletor-container label{width:100%;text-align:left}
  #seletor-data{width:100%}
  .dia-semana-label{width:100%;text-align:left}
  .btn-acao{width:100%}
  .slots-grid{padding:6px 10px 12px}
  .slot-horario{flex-basis:100%;min-width:unset}
  .horario-label{font-size:var(--fs-300)}
  .vagas-label{font-size:var(--fs-200)}
  .modal-content{width:calc(100vw - 24px);max-height:92vh}
  .large-modal .modal-content{width:calc(100vw - 16px)}
  .personagem-container{height:80px}
}

/* Acessibilidade: respeita redução de movimento */
@media (prefers-reduced-motion: reduce){
  .personagens-loop{animation:none}
  .chip-atividade:hover,.status-disponivel:hover,.status-admin-adicionar:hover{transform:none}
}
