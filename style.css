/* --- Identidade Visual Moinhos de Vento --- */
:root{
  --azul-moinhos:#004b84;
  --verde-moinhos:#00a99d;
  --cinza-claro:#f6f8fa;
  --cinza-texto:#495057;
  --cinza-borda:#dde2e6;
  --cinza-card:#ffffff;

  /* Estados */
  --ok-bg:#d4edda;
  --ok-fg:#155724;
  --warn-bg:#fff3cd;
  --warn-fg:#856404;
  --err-bg:#f8d7da;
  --err-fg:#721c24;
  --muted:#6c757d;

  /* sombras */
  --shadow-sm: 0 1px 2px rgba(0,0,0,.05);
  --shadow-md: 0 4px 10px rgba(0,0,0,.08);
  --shadow-lg: 0 12px 30px rgba(0,0,0,.18);

  /* tipografia fluida */
  --fs-100: clamp(14px, 1.2vw, 16px);
  --fs-200: clamp(15px, 1.35vw, 17px);
  --fs-300: clamp(16px, 1.6vw, 18px);
  --fs-400: clamp(18px, 2vw, 22px);
  --fs-500: clamp(20px, 2.4vw, 26px);
  --radius: 12px;
}

*{box-sizing:border-box}
html,body{height:100%}

body{
  font-family: system-ui, -apple-system, BlinkMacSystemFont,'Segoe UI',Roboto,Ubuntu,'Open Sans','Helvetica Neue',sans-serif;
  background:var(--cinza-claro);
  color:#2b2b2b;
  margin:0;
  padding-top:100px;
  padding-left:max(16px, env(safe-area-inset-left));
  padding-right:max(16px, env(safe-area-inset-right));
  line-height:1.5;
  font-size:var(--fs-200);
}

/* ---------- Cabeçalho ---------- */
header{
  text-align:center;
  margin-bottom:28px;
  color:var(--azul-moinhos);
  padding:12px 0;
}
.logos-container{
  display:flex;justify-content:center;align-items:center;gap:20px;
  margin-bottom:8px;flex-wrap:wrap;
}
#logo-hmv,#logo-casa-colaborador{max-height:88px;width:auto}

/* ---------- Container ---------- */
#agenda-container{max-width:1200px;margin:0 auto}

.loading,.alerta-erro,.alerta-info,.alerta-admin{
  text-align:center;font-size:var(--fs-300);color:var(--muted);padding:18px;
}

/* ---------- Toolbar (data + botões) ---------- */
#seletor-container{
  max-width:1200px;margin:0 auto 14px auto;padding:12px 16px;
  background:var(--cinza-card);border-radius:var(--radius);
  border:1px solid var(--cinza-borda);display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;
  box-shadow:var(--shadow-sm);
}
#seletor-container label{font-weight:700;color:var(--cinza-texto);letter-spacing:.2px}
#seletor-data{
  padding:10px 12px;border:2px solid var(--cinza-borda);border-radius:10px;
  font:inherit;min-width:180px;background:#fff;cursor:pointer;transition:border-color .2s, box-shadow .2s;
}
#seletor-data:focus{outline:none;border-color:var(--azul-moinhos);box-shadow:0 0 0 4px rgba(0,75,132,.18)}
.dia-semana-label{font-weight:800;color:var(--azul-moinhos);text-transform:capitalize}

/* ---------- Botões ---------- */
.btn-acao,.btn-modal{
  padding:10px 14px;border:none;border-radius:10px;font-weight:800;cursor:pointer;
  transition:opacity .18s,transform .06s, box-shadow .18s; will-change: transform;
  box-shadow: var(--shadow-sm);
}
.btn-acao:active,.btn-modal:active{transform:translateY(1px)}
.btn-azul{background:var(--azul-moinhos);color:#fff}
.btn-cinza{background:#6c757d;color:#fff}
.btn-vermelho{background:#dc3545;color:#fff}
.btn-verde{background:var(--verde-moinhos);color:#fff}
.btn-modal:hover,.btn-acao:hover{opacity:.92}
.btn-acao:focus-visible,.btn-modal:focus-visible{
  outline: none; box-shadow: 0 0 0 4px rgba(0,169,157,.22), 0 2px 10px rgba(0,0,0,.12);
}

/* Admin login flutuante */
#btn-admin-login{
  position:fixed;top:10px;right:20px;z-index:1000;padding:10px 15px
}

/* ---------- Filtro – Menu de Atividades ---------- */
.filtros-section{
  max-width:1200px;margin:0 auto 10px auto;padding:10px 16px;
  background:var(--cinza-card);border-radius:var(--radius);border:1px solid var(--cinza-borda);box-shadow:var(--shadow-sm)
}
.menu-atividades{
  display:flex;flex-wrap:wrap;gap:.5rem;overflow:auto; -webkit-overflow-scrolling:touch;
  scroll-snap-type:x proximity; padding-bottom:4px;
}
.menu-atividades .chip-atividade{scroll-snap-align:start}
.chip-atividade{
  padding:.48rem .92rem;border:1px solid #d0d7de;border-radius:999px;background:#fff;color:#0f172a;
  cursor:pointer;font-weight:800;white-space:nowrap;letter-spacing:.2px;
  transition:transform .08s ease, background-color .15s ease, border-color .15s ease, box-shadow .15s ease;
}
.chip-atividade:hover{transform:translateY(-1px);border-color:var(--azul-moinhos)}
.chip-atividade:focus-visible{outline:none;box-shadow:0 0 0 3px rgba(0,75,132,.18)}
.chip-atividade.ativo{background:var(--azul-moinhos);color:#fff;border-color:var(--azul-moinhos)}
.chip-atividade .badge{
  display:inline-block;font-size:.78em;margin-left:.45rem;padding:.12rem .5rem;border-radius:999px;background:rgba(255,255,255,.25);color:#fff
}
.chip-atividade:not(.ativo) .badge{background:rgba(0,0,0,.08);color:#0f172a}

/* ---------- Blocos / Acordeões ---------- */
.bloco-atividade{margin-top:18px}

/* Título de atividade (acordeão 1) */
.titulo-atividade{
  position:relative;font-size:var(--fs-500);color:var(--azul-moinhos);
  border-bottom:2px solid var(--verde-moinhos);margin:22px 0 8px 0;background:var(--cinza-card);
  padding:14px 52px 14px 16px;border-radius:var(--radius);box-shadow:var(--shadow-sm);
  user-select:none;cursor:pointer;transition:box-shadow .2s, transform .06s;
}
.titulo-atividade:hover{box-shadow:var(--shadow-md)}
.titulo-atividade:active{transform:translateY(1px)}
.titulo-atividade:focus-visible{outline:none;box-shadow:0 0 0 4px rgba(0,169,157,.22)}
.titulo-atividade::after{
  content:"";position:absolute;right:16px;top:50%;width:11px;height:11px;
  border-right:3px solid var(--azul-moinhos);border-bottom:3px solid var(--azul-moinhos);
  transform:translateY(-60%) rotate(45deg);transition:transform .25s ease;
}
.titulo-atividade.ativo::after{transform:translateY(-30%) rotate(-135deg)}

/* Container interno do acordeão 1 */
.atividade-content{
  background:var(--cinza-card);border-radius:var(--radius);box-shadow:var(--shadow-md);
  margin-bottom:16px;overflow:hidden;
}

/* Título do profissional (acordeão 2) */
.subtitulo-profissional{
  position:relative;margin:12px 8px 6px 16px;padding:8px 40px 8px 10px;
  font-weight:800;color:var(--cinza-texto);opacity:.98;font-size:var(--fs-300);
  border-radius:10px;user-select:none;cursor:pointer;transition:background-color .15s, color .15s;
}
.subtitulo-profissional:hover{background:#f3f6f8}
.subtitulo-profissional:focus-visible{outline:none;box-shadow:0 0 0 3px rgba(0,75,132,.18)}
.subtitulo-profissional::after{
  content:"";position:absolute;right:14px;top:50%;width:9px;height:9px;
  border-right:2.5px solid var(--azul-moinhos);border-bottom:2.5px solid var(--azul-moinhos);
  transform:translateY(-60%) rotate(45deg);transition:transform .22s ease;
}
.subtitulo-profissional.ativo::after{transform:translateY(-30%) rotate(-135deg)}

/* Container interno do acordeão 2 (controlado via JS pelo max-height) */
.prof-content{overflow:hidden;}

/* Grade de slots */
.slots-grid{display:flex;flex-wrap:wrap;gap:12px;padding:8px 14px 16px}

/* ---------- Slot (cartão) ---------- */
.slot-horario{
  flex-basis: calc(25% - 12px);
  min-width: 170px;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  padding:14px 12px;border-radius:12px;text-align:center;font-weight:800;
  box-shadow:var(--shadow-sm);
  transition:transform .18s, background-color .2s, border-color .2s, box-shadow .18s;
  border:1px solid transparent;background:#fff;
  touch-action: manipulation;
}
.horario-label{font-size:var(--fs-300);margin-bottom:6px;letter-spacing:.2px}
.vagas-label{font-weight:700;color:#2e5b2e;font-size:var(--fs-200)}

/* Estados do slot */
.status-disponivel{background:var(--ok-bg);color:var(--ok-fg);cursor:pointer}
.status-disponivel:hover{background:var(--verde-moinhos);color:#fff;transform:translateY(-1px);box-shadow:var(--shadow-md)}
.status-lotado{background:var(--err-bg);color:var(--err-fg);cursor:not-allowed}
.status-indisponivel{background:#eef1f4;color:#6c757d;cursor:not-allowed}
.status-fechado{background:#e9ecef;color:#495057;cursor:default}

/* --- Modo Admin --- */
.aviso-admin{
  font-weight:800;color:#dc3545;padding:10px;margin-bottom:12px;border:1px dashed #dc3545;background:#fef7f7;text-align:center;
  border-radius:10px;
}
.slot-horario .admin-id{font-size:.78em;color:#6c757d;margin-bottom:3px}
.slot-horario .status-admin-reservas{font-weight:500;color:var(--cinza-texto);margin-top:4px;font-size:.92em}
.slot-horario button.status-admin-excluir{
  background:none;border:none;padding:0;margin-top:6px;font-size:.95em;font-weight:900;cursor:pointer;text-decoration:underline;color:#c9302c
}
.slot-horario button.status-admin-excluir:hover{color:#8b0000}

.status-admin-ativo.status-disponivel{
  background:#ffc9c9!important;color:#c9302c!important;border:1px solid #dc3545!important
}
.status-admin-ativo.status-disponivel:hover{background:#dc3545!important;color:#fff!important}
.status-admin-adicionar{
  background:var(--ok-bg)!important;color:var(--ok-fg)!important;border:1px solid var(--verde-moinhos)!important;cursor:pointer
}
.status-admin-adicionar:hover{background:var(--verde-moinhos)!important;color:#fff!important;transform:translateY(-1px);box-shadow:var(--shadow-md)}

/* ---------- Modais ---------- */
.modal-overlay{
  position:fixed;inset:0;background:rgba(0,0,0,.55);
  display:flex;justify-content:center;align-items:center;z-index:1000;opacity:0;transition:opacity .3s ease
}
.modal-overlay.hidden{opacity:0;pointer-events:none}
.modal-content{
  background:#fff;padding:24px;border-radius:16px;box-shadow:var(--shadow-lg);
  width:min(92vw, 540px);max-height:90vh;overflow:auto;text-align:left
}
.large-modal .modal-content{width:min(94vw, 740px)}
.modal-content h2{margin:0 0 12px;color:var(--azul-moinhos)}
.form-group{margin:14px 0}
.form-group label{display:block;margin-bottom:6px;font-weight:800;color:var(--cinza-texto)}
.modal-content input:not([type="checkbox"]), .modal-content select{
  width:100%;padding:10px;font-size:var(--fs-200);border:1px solid var(--cinza-borda);border-radius:10px;transition:border-color .2s, box-shadow .2s
}
.modal-content input:focus,.modal-content select:focus{outline:none;border-color:var(--verde-moinhos);box-shadow:0 0 0 3px rgba(0,169,157,.22)}
.modal-botoes{display:flex;justify-content:flex-end;gap:10px;margin-top:18px}
.vertical-botoes{flex-direction:column;gap:10px}
.vertical-botoes button{width:100%}
#modal-mensagem,#consulta-mensagem,#admin-add-mensagem{margin-top:12px;font-weight:800;text-align:center}

/* ---------- Consulta – lista ---------- */
#lista-agendamentos{
  list-style:none;padding:0;margin:16px 0;max-height:320px;overflow:auto;
  border-top:1px solid var(--cinza-borda);border-bottom:1px solid var(--cinza-borda)
}
.item-reserva{
  display:flex;justify-content:space-between;align-items:center;gap:10px;
  padding:12px;border-bottom:1px solid #eff2f4;background:#fff
}
.item-reserva:last-child{border-bottom:none}
.item-reserva span{flex:1;font-size:var(--fs-200)}

/* ---------- Admin adicionar – grelha de horários ---------- */
.horarios-grid{
  display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
  gap:10px;margin-top:10px;padding:14px;border:1px solid var(--cinza-borda);border-radius:12px;max-height:420px;overflow:auto;background:#fff
}
.horario-item{
  display:flex;align-items:center;justify-content:space-between;gap:10px;padding:10px;border:1px solid var(--cinza-borda);
  border-radius:10px;background:#fff;cursor:pointer;transition:background-color .2s,border-color .2s, box-shadow .18s
}
.horario-item:hover{background:#f1f3f5;border-color:var(--verde-moinhos);box-shadow:var(--shadow-sm)}
.horario-item label{margin:0;cursor:pointer;flex:1}
.qm-checkbox,.qm-indisp-checkbox{width:22px;height:22px}
.qm-checkbox:checked,.qm-indisp-checkbox:checked{accent-color:var(--verde-moinhos)}

/* ---------- Animação personagem ---------- */
.personagem-container{position:relative;width:100%;height:100px;overflow:hidden}
.personagens-loop{
  height:100%;width:200vw;background:url('img/personagem-casa.png') repeat-x 0 10px/auto 80px;
  transform:scaleX(-1);animation:rolarFundo 30s linear infinite;
}
@keyframes rolarFundo{from{background-position-x:0}to{background-position-x:-1920px}}

/* ---------- Utilidades ---------- */
.hidden{display:none!important}

/* ---------- QR Code ---------- */
.qr-code-container{max-width:1200px;margin:36px auto;text-align:center}
#qr-code-aulas{max-width:900px;width:100%;height:auto;border-radius:12px;box-shadow:var(--shadow-md)}

/* ---------- Responsividade ---------- */
/* Tablets médios */
@media (max-width: 1100px){
  .slot-horario{flex-basis:calc(33.333% - 12px)}
  #logo-hmv,#logo-casa-colaborador{max-height:82px}
}
/* Tablets pequenos / telefones grandes */
@media (max-width: 820px){
  body{padding-top:88px}
  .slot-horario{flex-basis:calc(50% - 12px);min-height:86px}
  .titulo-atividade{font-size:var(--fs-400)}
  #seletor-container{justify-content:space-between}
  #seletor-data{min-width:unset;flex:1}
  .btn-acao{flex:1}
}
/* Mobile */
@media (max-width: 520px){
  #seletor-container{padding:12px;gap:10px}
  #seletor-container label{width:100%;text-align:left}
  #seletor-data{width:100%}
  .dia-semana-label{width:100%;text-align:left}
  .btn-acao{width:100%}
  .slots-grid{padding:6px 12px 14px}
  .slot-horario{flex-basis:100%;min-width:unset}
  .horario-label{font-size:var(--fs-300)}
  .vagas-label{font-size:var(--fs-200)}
  .modal-content{width:calc(100vw - 24px);max-height:92vh}
  .large-modal .modal-content{width:calc(100vw - 16px)}
  .personagem-container{height:80px}
}

/* Acessibilidade: menos movimento */
@media (prefers-reduced-motion: reduce){
  .personagens-loop{animation:none}
  .chip-atividade:hover,.status-disponivel:hover,.status-admin-adicionar:hover{transform:none}
}
